---
source: backlog
created: 2025-07-12
priority: high
---

# CLI 중심 재편

## 개요
gzh-manager-go를 순수 CLI 도구로 재편하여 데몬 모드를 제거하고 사용자 명령 기반으로만 동작하도록 변경

## 작업 목록

### 1. 네트워크 관리 명령어 재설계
- [x] **실시간 감지 기능 제거** - WiFi 변경 감지 데몬 모드 제거
  - 기존 fsnotify 기반 실시간 감지 코드 제거
  - 백그라운드 모니터링 서비스 삭제
- [x] **on-demand 네트워크 전환 구현** - `gz net-env switch` 명령어로 수동 전환
  - VPN, DNS, 프록시, 호스트 파일 일괄 전환 스크립트
  - 네트워크 프로필별 설정 템플릿 시스템
- [x] **네트워크 상태 확인 명령어** - `gz net-env status` 현재 네트워크 설정 조회
  - 현재 VPN 연결 상태
  - DNS/프록시 설정 확인
  - 네트워크 연결성 테스트

### 2. 데몬 관련 코드 정리
- [ ] **데몬 모니터링 기능 제거** - 시스템 서비스 모니터링 코드 삭제
  - `cmd/net-env/daemon` 패키지 제거
  - systemd/launchd 관련 코드 제거
- [ ] **이벤트 기반 자동화 단순화** - 복잡한 이벤트 시스템을 스크립트 실행으로 변경
  - 네트워크 변경 시 사용자 정의 스크립트 실행
  - Hook 시스템으로 단순화
- [ ] **설정 파일 구조 단순화** - 데몬 관련 설정 제거
  - 네트워크 프로필 설정만 유지
  - YAML 스키마 업데이트

### 3. 문서 및 README 업데이트
- [ ] **README.md 네트워크 섹션 수정** - 데몬 모드 설명 제거
  - "실시간 감지" → "일괄 수정" 변경
  - 사용 예시를 명령어 기반으로 변경
- [ ] **사용자 가이드 업데이트** - CLI 중심 워크플로우로 문서 수정
  - 데몬 설치/설정 가이드 제거
  - 네트워크 전환 명령어 가이드 추가
- [ ] **마이그레이션 가이드 작성** - 기존 사용자를 위한 변경 사항 안내
  - 기존 데몬 모드 사용자 대상 안내
  - 새로운 CLI 워크플로우 가이드

### 4. 테스트 및 검증
- [ ] **단위 테스트 업데이트** - 데몬 관련 테스트 제거 및 CLI 테스트 보강
  - 비동기 이벤트 테스트 제거
  - 명령어 실행 테스트 추가
- [ ] **통합 테스트 재구성** - CLI 중심 시나리오로 테스트 변경
  - 네트워크 전환 명령어 테스트
  - 설정 파일 로딩 테스트

## 기술 요구사항
- 기존 네트워크 전환 로직 재사용
- CLI 프레임워크(cobra) 활용
- 설정 파일 호환성 유지

## 예상 효과
- 더 단순하고 예측 가능한 동작
- 시스템 리소스 사용량 감소
- 문제 해결 및 디버깅 용이성 향상
- 배포 및 설치 과정 단순화

## 난이도
**중간** - 기존 코드 리팩토링이 주 작업