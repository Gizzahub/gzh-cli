# 리팩토링 프로젝트 사전 준비

## 개요
- **목표**: 4개 Phase 리팩토링 프로젝트 실행을 위한 사전 준비 작업
- **우선순위**: CRITICAL
- **예상 소요시간**: 1시간
- **담당자**: Backend
- **복잡도**: 낮음 (준비 작업)

## 선행 작업
- [ ] 현재 작업 내용 모두 커밋 완료
- [ ] 브랜치 상태 정리 완료

## 세부 작업 목록

### 1. Git 상태 정리 및 백업 지점 생성
- [ ] **현재 상태 커밋** (`git status` 확인 후 커밋)
  - 작업중인 모든 내용 커밋 완료
  - 완료 기준: 깨끗한 working directory 상태
  - 주의사항: 미완성 작업은 별도 브랜치에 보관

- [ ] **refactor-start 태그 생성** (`git tag refactor-start`)
  - 리팩토링 시작 지점 태그 생성
  - 완료 기준: 태그 생성 및 푸시 완료
  - 주의사항: 전체 롤백 시 이 지점으로 복구 가능

- [ ] **현재 브랜치 확인** (`git branch`)
  - develop 브랜치에서 작업 중인지 확인
  - 필요시 적절한 작업 브랜치로 전환
  - 완료 기준: 올바른 브랜치에서 시작
  - 주의사항: main/master 브랜치에서 직접 작업 금지

### 2. 빌드 및 테스트 기준선 확립
- [ ] **전체 빌드 상태 확인** (`make build`)
  - 현재 모든 패키지 빌드 성공 확인
  - `go build ./...` 명령어로 전체 검증
  - 완료 기준: 컴파일 에러 없음
  - 주의사항: 리팩토링 전 정상 상태 보장 필수

- [ ] **테스트 기준선 확립** (`make test`)
  - 현재 테스트 통과 현황 기록
  - 실패하는 테스트가 있다면 문서화
  - 완료 기준: 테스트 현황 파악 완료
  - 주의사항: 리팩토링 후 같은 수준 이상 유지

- [ ] **코드 품질 기준선 확인** (`make lint-all`)
  - 현재 린팅 상태 확인
  - 포맷팅 이슈 사전 해결
  - 완료 기준: 깨끗한 코드 품질 상태
  - 주의사항: 리팩토링 중 품질 저하 방지

### 3. 환경 및 도구 준비
- [ ] **Go 버전 확인** (`go version`)
  - go.mod에 명시된 버전과 일치하는지 확인
  - 완료 기준: 호환되는 Go 버전 사용
  - 주의사항: 버전 불일치로 인한 빌드 문제 방지

- [ ] **필요한 도구 설치 확인** (`make bootstrap`)
  - golangci-lint, gofumpt 등 필수 도구 설치 확인
  - 완료 기준: 모든 개발 도구 사용 가능
  - 주의사항: 도구 누락으로 인한 작업 중단 방지

- [ ] **에디터/IDE 설정** (선택사항)
  - Go 모듈 인식 확인
  - 자동 import 정리 설정 확인
  - 완료 기준: 개발 환경 최적화
  - 주의사항: 일관된 코드 스타일 유지

### 4. 작업 환경 문서화
- [ ] **현재 패키지 구조 스냅샷** (`tree cmd/ internal/`)
  - 리팩토링 전 구조 기록
  - 완료 기준: Before/After 비교 자료 준비
  - 주의사항: 변경사항 추적을 위한 기준점

- [ ] **파일 개수 및 라인 수 측정**
  ```bash
  find cmd/pm -name "*.go" | wc -l
  find cmd/repo-config -name "*.go" | wc -l  
  find cmd/ide -name "*.go" | wc -l
  find cmd/net-env -name "*.go" | wc -l
  ```
  - 완료 기준: 각 패키지별 현황 기록
  - 주의사항: 리팩토링 효과 측정 기준 마련

### 5. 브랜치 전략 수립
- [ ] **Phase별 브랜치 명명 규칙 확정**
  - refactor-phase1-pm
  - refactor-phase2-repo-config  
  - refactor-phase3-ide
  - refactor-phase4-net-env
  - 완료 기준: 일관된 브랜치 명명 규칙
  - 주의사항: 명확한 구분으로 관리 용이성 확보

- [ ] **머지 전략 결정**
  - 각 Phase 완료 후 develop으로 머지할지 결정
  - 전체 완료 후 일괄 머지할지 결정
  - 완료 기준: 명확한 머지 계획 수립
  - 주의사항: 충돌 최소화 전략

### 6. 백업 및 안전장치 설정
- [ ] **원격 저장소 백업** (`git push --tags`)
  - refactor-start 태그 원격에 푸시
  - 완료 기준: 원격 백업 완료
  - 주의사항: 로컬 장애에 대비한 안전장치

- [ ] **로컬 브랜치 백업** (선택사항)
  - 중요 브랜치들의 로컬 백업 생성
  - 완료 기준: 다중 백업 지점 확보
  - 주의사항: 극단적 상황에 대비한 추가 안전장치

### 7. 실행 계획 최종 검토
- [ ] **TODO 파일 순서 확인**
  - 01 → 02 → 03 → 04 순서 적절한지 검토
  - 각 Phase 간 의존성 재확인
  - 완료 기준: 실행 순서 확정
  - 주의사항: 의존성 위반으로 인한 실패 방지

- [ ] **예상 시간 및 리소스 계획**
  - Phase 1: 2시간 (PM)
  - Phase 2: 3시간 (repo-config)
  - Phase 3: 4시간 (IDE)  
  - Phase 4: 6시간 (net-env)
  - 총 15시간 + 준비/정리 시간
  - 완료 기준: 현실적인 일정 계획 수립
  - 주의사항: 충분한 여유시간 확보

## 완료 검증 체크리스트

### Git 상태 검증
- [ ] `git status` 깨끗한 상태
- [ ] `refactor-start` 태그 생성 완료
- [ ] 적절한 브랜치에서 시작 준비

### 빌드 상태 검증
- [ ] `go build ./...` 성공
- [ ] `make test` 기준선 확립
- [ ] `make lint-all` 깨끗한 상태

### 환경 준비 검증
- [ ] 필요한 도구 모두 설치됨
- [ ] Go 버전 호환성 확인
- [ ] 개발 환경 최적화 완료

### 문서화 검증
- [ ] 현재 구조 스냅샷 완료
- [ ] 파일 개수/라인 수 측정 완료
- [ ] 브랜치 전략 수립 완료

## 예상 문제 및 해결책

### 문제 1: 현재 상태에 빌드 에러
- **증상**: 리팩토링 시작 전부터 빌드 실패
- **해결**: 기존 에러 해결 후 리팩토링 시작

### 문제 2: 테스트 실패
- **증상**: 기존 테스트가 실패 상태
- **해결**: 실패 원인 분석 후 수정 또는 현황 문서화

### 문제 3: 도구 설치 실패
- **증상**: golangci-lint, gofumpt 등 설치 실패
- **해결**: `make bootstrap` 다시 실행 또는 수동 설치

### 문제 4: 브랜치 정리 필요
- **증상**: 너무 많은 브랜치로 인한 혼란
- **해결**: 불필요한 브랜치 정리 후 시작

## 성공 기준
1. **깨끗한 시작점**: 에러 없는 빌드/테스트 상태
2. **완벽한 백업**: 언제든 롤백 가능한 안전장치
3. **명확한 계획**: 실행 가능한 단계별 로드맵
4. **최적화된 환경**: 리팩토링에 적합한 개발 환경

## 다음 단계
사전 준비 완료 후 → [01-phase1-pm-package-refactoring.md](./01-phase1-pm-package-refactoring.md)

## 관련 파일
- Git 태그: `refactor-start`
- 브랜치: 현재 작업 브랜치
- 백업 지점: 원격 저장소