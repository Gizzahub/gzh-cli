{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Bulk Clone Configuration Schema",
  "description": "Schema for gzh-manager bulk-clone configuration files",
  "type": "object",
  "required": ["version"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Configuration schema version",
      "enum": ["0.1"]
    },
    "default": {
      "type": "object",
      "description": "Default settings for all providers",
      "properties": {
        "protocol": {
          "type": "string",
          "description": "Default protocol for Git operations",
          "enum": ["http", "https", "ssh"]
        },
        "github": {
          "$ref": "#/definitions/githubDefault"
        },
        "gitlab": {
          "$ref": "#/definitions/gitlabDefault"
        }
      },
      "additionalProperties": false
    },
    "repo_roots": {
      "type": "array",
      "description": "Repository configurations for different organizations",
      "items": {
        "$ref": "#/definitions/githubRepoRoot"
      }
    },
    "ignore_names": {
      "type": "array",
      "description": "Repository name patterns to ignore (regex)",
      "items": {
        "type": "string"
      }
    }
  },
  "additionalProperties": false,
  "definitions": {
    "githubDefault": {
      "type": "object",
      "description": "Default settings for GitHub",
      "properties": {
        "root_path": {
          "type": "string",
          "description": "Base directory for GitHub repositories"
        },
        "provider": {
          "type": "string",
          "description": "Provider identifier"
        },
        "protocol": {
          "type": "string",
          "description": "Protocol override for GitHub",
          "enum": ["", "http", "https", "ssh"]
        },
        "org_name": {
          "type": "string",
          "description": "Default organization name"
        }
      },
      "additionalProperties": false
    },
    "gitlabDefault": {
      "type": "object",
      "description": "Default settings for GitLab",
      "properties": {
        "root_path": {
          "type": "string",
          "description": "Base directory for GitLab repositories"
        },
        "provider": {
          "type": "string",
          "description": "Provider identifier"
        },
        "url": {
          "type": "string",
          "description": "GitLab instance URL"
        },
        "recursive": {
          "type": "boolean",
          "description": "Whether to clone subgroups recursively"
        },
        "protocol": {
          "type": "string",
          "description": "Protocol override for GitLab",
          "enum": ["", "http", "https", "ssh"]
        },
        "group_name": {
          "type": "string",
          "description": "Default group name"
        }
      },
      "additionalProperties": false
    },
    "githubRepoRoot": {
      "type": "object",
      "description": "GitHub organization configuration",
      "required": ["root_path", "provider", "protocol", "org_name"],
      "properties": {
        "root_path": {
          "type": "string",
          "description": "Directory where repositories will be cloned"
        },
        "provider": {
          "type": "string",
          "description": "Git provider",
          "const": "github"
        },
        "protocol": {
          "type": "string",
          "description": "Protocol for Git operations",
          "enum": ["http", "https", "ssh"]
        },
        "org_name": {
          "type": "string",
          "description": "GitHub organization name",
          "minLength": 1
        }
      },
      "additionalProperties": false
    }
  }
}
